---
name: Go version setup
permissions: read-all

on:
  workflow_call:
    outputs:
      goversion:
        value: ${{ jobs.version.outputs.goversion }}

jobs:
  version:
    name: Set Go version variable for all the workflows
    runs-on: ubuntu-latest
    outputs:
      goversion: ${{ steps.goversion.outputs.goversion }}
    steps:
      - uses: actions/checkout@c85c95e3d7251135ab7dc9ce3241c5835cc595a9 # v3.5.3
      - id: goversion
        run: |
          GO_VERSION=$(cat .go-version)
          echo "Go Version: $GO_VERSION"
          echo "goversion=$GO_VERSION" >> $GITHUB_OUTPUT
